<div class="persons-page">
  <h2>Persons</h2>

  <div class="search-container">
    <input
      type="text"
      placeholder="Search by first name, last name, or email..."
      [formControl]="personsSearchControl"/>
  </div>
  @if (loading$ | async) {
    <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
  } @else {
    <table>
      <thead>
      <tr>
        <th>
          <span (click)="onFirstNameSort()">
                      First Name
          </span>
        </th>
        <th>Last Name</th>
        <th>Email</th>
        <th>
          <span (click)="onPhoneSort()">
            Phone
          </span>
        </th>
        <th>Website</th>
      </tr>
      </thead>
      <tbody>
        @for (person of paginatedPersons; track person.id) {
          <tr>
            <td>{{ person.firstname }}</td>
            <td>{{ person.lastname }}</td>
            <td>{{ person.email }}</td>
            <td>{{ person.phone }}</td>
            <td>{{ person.website }}</td>
          </tr>
        }
      </tbody>
    </table>
  }

  <app-paginator
    [totalItems]="filteredPersons.length"
    [itemsPerPage]="itemsPerPage"
    [currentPage]="currentPage"
    (pageChange)="onPageChange($event)">
  </app-paginator>
</div>
